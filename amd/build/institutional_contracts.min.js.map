{"version":3,"file":"institutional_contracts.min.js","sources":["../src/institutional_contracts.js"],"sourcesContent":["import * as Ajax from 'core/ajax';\nimport $ from 'jquery';\n\nconst createContractButton = $('#create-contract-button');\nconst removeContractButtons = $('.remove-contract');\nconst removeContractConfirmButton = $('#remove-contract-confirm-button');\nconst confirmContractDeletionModal = $('#confirmContractDeletionModal');\n\nconst viewUserDetailsButtons = $('.view-details-button');\nconst userInfoName = $('#user-info-name');\nconst userInfoEmail = $('#user-info-email');\nconst userInfoAvatar = $('#user-info-avatar');\nconst viewUserProfileButton = $('#view-profile-button');\nconst userInfoContractList = $('#user-info-contract-list');\nconst confirmContractUserDeletionModal = $('#confirmContractUserDeletionModal');\nconst confirmContractUserDeletionButton = $('#remove-contract-user-confirm-button');\n\nconst selectedUserInput = $('#selected-user');\nconst contractSelectInput = $('#contractlist');\nconst coursesSelectInput = $('#courselist');\nconst newContractUserInputs = [selectedUserInput, contractSelectInput, coursesSelectInput];\nconst addUserButton = $('#add-user-button');\n\nconst generateEnrolLinkModal = $('#generateEnrolLinkModal');\nconst enrolLinkContractListSelect = $('#enrolLinkContractList');\nconst enrolLinkCourseListSelect = $('#enrolLinkCourseList');\nconst enrolLinkInputs = [enrolLinkContractListSelect, enrolLinkCourseListSelect];\nconst enrolLinkGenerateButton = $('#generate-enrol-button');\n\nconst genetaredLinkInfoModal = $('#generatedLinkInfoModal');\nconst enrolLinkExpirationDateContainer = $('#enrolLinkExpirationDate');\nconst enrolLinkUrlContainer = $('#enrolLinkUrl');\nconst enrolUrlClipboardCopyButton = $('#enrolUrlClipboardCopy');\n\nconst bulkUserContractInput = $('#upload_massive_inst_users');\nconst bulkConfirmModal = $('#bulkConfirmModal');\nconst bulkConfirmModalButton = $('#bulkConfirmModalButton');\nconst bulkCancelModalButton = $('#bulkCancelModalButton');\nconst bulkReportModal = $('#bulkReportModal');\nconst bulkResultTableBody = $('#bulkResultTableBody');\nconst bulkReportContinueButton = $('#bulk-report-continue');\n\nconst contractSearch = $('#contract-search');\nconst contractUserSearch = $('#contract-user-search');\nconst contractApplyFilterButton = $('#contract-apply-filter-button');\nconst userContractApplyFilterButton = $('#user-contract-apply-filter-button');\nconst contractRemoveFilterButton = $('#contract-remove-filter-button');\nconst userContractRemoveFilterButton = $('#user-contract-remove-filter-button');\n\nconst contractIcon = `${window.location.href}/theme/image.php?\n                    theme=soluttolmsadmin&\n                    amp;component=local_grupomakro_core&\n                    amp;image=t%2Fcontract`;\n\nconst errorModal = $('#errorModal');\nconst errorModalContent = $('#error-modal-content');\n\nlet selectedInstitutionId;\nlet selectedContractId;\nlet selectedUser;\nlet selectedInstitutionContractUsers;\nlet availableUsers;\nlet selectedUserToBeCreated;\nlet selectedContractUserId;\nlet generatedEnrolLinkUrl;\nlet bulkFile;\nlet token;\n\nexport const init = (institutionId, institutionContractUsers, users,userToken) => {\n    token=userToken;\n    selectedInstitutionContractUsers = institutionContractUsers;\n    selectedInstitutionId = institutionId;\n    availableUsers = users;\n    handleCreateContractButtonClick();\n    handleRemoveContractButtonClick();\n    handleRemoveContractConfirmButtonClick();\n    handleRemoveContractUserConfirmButtonClick();\n    handleViewUserDetailsButton();\n    handleViewUserProfileButtonClick();\n    handleDeleteUserContractLinkButtonClick();\n    handleUserCreation();\n    handleEnrolLinkGenerateButtonClick();\n    handleEnrolUrlClipboardCopyButton();\n    handleBulkContractUserInput();\n    handleAddFilters();\n    handleRemoveFilters();\n};\n\nconst handleRemoveFilters = () => {\n    contractRemoveFilterButton.click(()=>{\n        const queryParams = new URLSearchParams(window.location.search);\n        const contractUserFilter = queryParams.get('contractUserFilter');\n        window.location.href = `/local/grupomakro_core/pages/institutionalcontracts.php?\n        id=${selectedInstitutionId}\n        ${contractUserFilter\n        ? `&contractUserFilter=${contractUserFilter}`\n        : ''}`;\n    });\n\n    userContractRemoveFilterButton.click(()=>{\n        const queryParams = new URLSearchParams(window.location.search);\n        const contractFilter = queryParams.get('contractFilter');\n        window.location.href = `/local/grupomakro_core/pages/institutionalcontracts.php?\n        id=${selectedInstitutionId}\n        ${contractFilter\n        ? `&contractFilter=${contractFilter}`\n        : ''}#users`;\n    });\n};\n\nconst handleAddFilters = () => {\n    contractApplyFilterButton.click(()=>{\n        const queryParams = new URLSearchParams(window.location.search);\n        const contractUserFilter = queryParams.get('contractUserFilter');\n        window.location.href = `/local/grupomakro_core/pages/institutionalcontracts.php?\n        id=${selectedInstitutionId}&contractFilter=${contractSearch.val()}\n        ${contractUserFilter\n        ? `&contractUserFilter=${contractUserFilter}`\n        : ''}`;\n\n    });\n    userContractApplyFilterButton.click(()=>{\n        const queryParams = new URLSearchParams(window.location.search);\n        const contractFilter = queryParams.get('contractFilter');\n        window.location.href = `/local/grupomakro_core/pages/institutionalcontracts.php?\n        id=${selectedInstitutionId}&contractUserFilter=${contractUserSearch.val()}\n        ${contractFilter\n        ? `&contractFilter=${contractFilter}`\n        : ''}#users`;\n    });\n};\n\nconst handleBulkContractUserInput = () => {\n    bulkReportContinueButton.click(()=>{\n        window.location.reload();\n    });\n\n    bulkUserContractInput.on('change', (event)=>{\n        bulkFile = event.target.files[0];\n        bulkConfirmModal.modal('show');\n    });\n\n    bulkConfirmModalButton.click(async()=>{\n        const formData = new FormData();\n        formData.append('file', bulkFile);\n        formData.append('token', token);\n        const fetchParams = {\n            method: 'POST',\n            body: formData\n        };\n        try {\n            let bulkCSVUploadResponse = await window.fetch(`${window.location.href}/webservice/upload.php`, fetchParams);\n            if (!bulkCSVUploadResponse.ok) {\n                throw new Error('Request failed with status: ' + bulkCSVUploadResponse.status);\n            }\n            bulkCSVUploadResponse = await bulkCSVUploadResponse.json();\n            bulkCSVUploadResponse = bulkCSVUploadResponse[0];\n            const args = {\n                contextId: bulkCSVUploadResponse.contextid,\n                itemId: bulkCSVUploadResponse.itemid,\n                filename: bulkCSVUploadResponse.filename\n            };\n            const bulkEnrolResponse = await Ajax.call([{\n                methodname: 'local_grupomakro_bulk_create_contract_user',\n                args\n            }])[0];\n            if (!bulkEnrolResponse.result) {\n                throw bulkEnrolResponse.message;\n            }\n            const bulkResults = JSON.parse(bulkEnrolResponse.result);\n            bulkConfirmModal.modal('hide');\n            bulkReportModal.modal('show');\n\n            let bulkResultTableRowsHtmlString = '';\n            bulkResults.errors.forEach(record => {\n                bulkResultTableRowsHtmlString += `<tr class=\"inserted-error\">\n                      <th scope=\"row\">${record.index}</th>\n                      <td>${record.error}</td>\n                    </tr>`;\n            });\n\n            bulkResultTableBody.html(bulkResultTableRowsHtmlString);\n\n        } catch (error) {\n            errorModalContent.html(`<p class=\"text-center\">${error}</p>`);\n            errorModal.modal('show');\n        }\n    });\n\n    bulkCancelModalButton.click(()=>{\n        bulkConfirmModal.modal('hide');\n        bulkFile = undefined;\n    });\n\n};\n\nconst handleEnrolUrlClipboardCopyButton = () => {\n    enrolUrlClipboardCopyButton.click(()=>{\n        window.navigator.clipboard.writeText(generatedEnrolLinkUrl);\n        window.alert('Se ha copiado la url');\n    });\n};\n\nconst handleEnrolLinkGenerateButtonClick = () => {\n    enrolLinkGenerateButton.click(()=>{\n        // Check the select inputs and the time inputs\n        const valid = enrolLinkInputs.every(input => {\n            return input.get(0).reportValidity();\n        });\n        if (!valid) {\n            return;\n        }\n        //\n        const args = {\n            contractId: enrolLinkContractListSelect.val(),\n            courseId: enrolLinkCourseListSelect.val()\n        };\n        const promise = Ajax.call([{\n            methodname: 'local_grupomakro_generate_contract_enrol_link',\n            args\n        }]);\n        promise[0].done(function(response) {\n            if (response.contractEnrolLink === '-1') {\n                errorModalContent.html(`<p class=\"text-center\">${response.message}</p>`);\n                errorModal.modal('show');\n                return;\n            }\n            generateEnrolLinkModal.modal('hide');\n            enrolLinkExpirationDateContainer.text(response.expirationDate);\n            enrolLinkUrlContainer.text(response.contractEnrolLink);\n            generatedEnrolLinkUrl = response.contractEnrolLink;\n            genetaredLinkInfoModal.modal('show');\n        }).fail(function(error) {\n            window.alert(error);\n        });\n\n    });\n};\n\nconst handleUserCreation = () => {\n    addUserButton.click(()=>{\n        selectedUserInput.get(0).setCustomValidity('');\n        // Check the select inputs and the time inputs\n\n        const valid = newContractUserInputs.every(input => {\n            return input.get(0).reportValidity();\n        });\n        if (!valid) {\n            return;\n        }\n        //\n\n        if (!selectedUserToBeCreated) {\n            selectedUserInput.get(0).setCustomValidity('Este usuario no existe.');\n            selectedUserInput.get(0).reportValidity();\n            return;\n        }\n\n        const args = {\n            userId: selectedUserToBeCreated.id,\n            contractId: contractSelectInput.val(),\n            courseIds: coursesSelectInput.val().join(',')\n        };\n        const promise = Ajax.call([{\n            methodname: 'local_grupomakro_create_contract_user',\n            args\n        }]);\n        promise[0].done(function(response) {\n            if (!response.result) {\n                errorModalContent.html(`<p class=\"text-center\">${response.message}</p>`);\n                errorModal.modal('show');\n            }\n            const parsedResponse = JSON.parse(response.result);\n            if (!parsedResponse.success.length) {\n\n                errorModalContent.html(`<p class=\"text-center\">${parsedResponse.failure[0].message}</p>`);\n                errorModal.modal('show');\n                return;\n            }\n            window.location.reload();\n        }).fail(function(error) {\n            window.alert(error);\n        });\n    });\n\n    selectedUserInput.on('input', ()=>{\n        selectedUserToBeCreated = availableUsers.find(user=>user.username === selectedUserInput.val());\n        if (!selectedUserToBeCreated) {\n            contractSelectInput.prop('disabled', true);\n            return;\n        }\n        contractSelectInput.removeAttr('disabled');\n    });\n\n};\n\nconst handleDeleteUserContractLinkButtonClick = ()=> {\n    const deleteUserContractLinkButtons = $('.delete-contract-user-link');\n    deleteUserContractLinkButtons.click(event=>{\n        selectedContractUserId = event.currentTarget.attributes['contract-user-id'].value;\n        confirmContractUserDeletionModal.modal('show');\n    });\n\n\n};\n\nconst handleRemoveContractUserConfirmButtonClick = () => {\n    confirmContractUserDeletionButton.click(()=>{\n        if (!selectedContractUserId) {\n return;\n}\n        const args = {\n            id: selectedContractUserId\n        };\n        const promise = Ajax.call([{\n            methodname: 'local_grupomakro_delete_contract_user',\n            args\n        }]);\n        promise[0].done(function(response) {\n            if (response.deletedContractUserId === -1) {\n                confirmContractUserDeletionModal.modal('hide');\n                errorModalContent.html(`<p class=\"text-center\">${response.message}</p>`);\n                errorModal.modal('show');\n                return;\n            }\n            window.location.reload();\n        }).fail(function(error) {\n            console.error(error);\n        });\n    });\n\n};\n\nconst handleViewUserProfileButtonClick = () =>{\n    viewUserProfileButton.click(()=>{\n        window.open(selectedUser.profileUrl, 'blank');\n    });\n};\n\nconst handleCreateContractButtonClick = () => {\n    createContractButton.click(()=>{\n        window.location.href = `/local/grupomakro_core/pages/createcontractinstitutional.php?id=${selectedInstitutionId}`;\n    });\n};\n\nconst handleRemoveContractButtonClick = () => {\n    removeContractButtons.click(event=>{\n        selectedContractId = event.currentTarget.attributes['contract-id'].value;\n    });\n};\n\nconst handleRemoveContractConfirmButtonClick = ()=> {\n    removeContractConfirmButton.click(()=>{\n        const args = {\n            id: selectedContractId,\n        };\n        const promise = Ajax.call([{\n            methodname: 'local_grupomakro_delete_institution_contract',\n            args\n        }]);\n        promise[0].done(function(response) {\n            if (response.deletedInstitutionContractId === -1) {\n                confirmContractDeletionModal.modal('hide');\n                errorModalContent.html(`<p class=\"text-center\">${response.message}</p>`);\n                errorModal.modal('show');\n                return;\n            }\n            window.location.reload();\n        }).fail(function(error) {\n            console.error(error);\n        });\n    });\n};\n\nconst handleViewUserDetailsButton = () => {\n    viewUserDetailsButtons.click((event)=> {\n        selectedUser = selectedInstitutionContractUsers[event.currentTarget.attributes['contract-user-id'].value];\n        userInfoName.text(selectedUser.fullname);\n        userInfoName.attr('href', selectedUser.profileUrl);\n        userInfoEmail.text(selectedUser.email);\n        userInfoAvatar.attr('src', selectedUser.avatar);\n\n        let contractsHtmlString = '';\n        selectedUser.contracts.forEach(contract=>{\n            contractsHtmlString += `\n            <li class=\"list-group-item d-flex justify-content-between align-items-center\">\n                <div class=\"contracicon d-flex align-items-center\">\n                    <img class=\"icon \" alt=\"\" aria-hidden=\"true\" src=\"${contractIcon}\">\n                    <span class=\"ml-2\">${contract.contractId}</span>\n                    <span class=\"ml-2\">${contract.courseName}</span>\n                </div>\n                <a href=\"#\" class=\"text-secondary delete-contract-user-link\" contract-user-id=\"${contract.id}\">\n                    <i class=\"fa fa-trash\" style=\"font-size:20px\"></i>\n                </a>\n            </li>`;\n        });\n\n        userInfoContractList.html(contractsHtmlString);\n        handleDeleteUserContractLinkButtonClick();\n    });\n};"],"names":["createContractButton","removeContractButtons","removeContractConfirmButton","confirmContractDeletionModal","viewUserDetailsButtons","userInfoName","userInfoEmail","userInfoAvatar","viewUserProfileButton","userInfoContractList","confirmContractUserDeletionModal","confirmContractUserDeletionButton","selectedUserInput","contractSelectInput","coursesSelectInput","newContractUserInputs","addUserButton","generateEnrolLinkModal","enrolLinkContractListSelect","enrolLinkCourseListSelect","enrolLinkInputs","enrolLinkGenerateButton","genetaredLinkInfoModal","enrolLinkExpirationDateContainer","enrolLinkUrlContainer","enrolUrlClipboardCopyButton","bulkUserContractInput","bulkConfirmModal","bulkConfirmModalButton","bulkCancelModalButton","bulkReportModal","bulkResultTableBody","bulkReportContinueButton","contractSearch","contractUserSearch","contractApplyFilterButton","userContractApplyFilterButton","contractRemoveFilterButton","userContractRemoveFilterButton","contractIcon","window","location","href","errorModal","errorModalContent","selectedInstitutionId","selectedContractId","selectedUser","selectedInstitutionContractUsers","availableUsers","selectedUserToBeCreated","selectedContractUserId","generatedEnrolLinkUrl","bulkFile","token","institutionId","institutionContractUsers","users","userToken","handleCreateContractButtonClick","handleRemoveContractButtonClick","handleRemoveContractConfirmButtonClick","handleRemoveContractUserConfirmButtonClick","handleViewUserDetailsButton","handleViewUserProfileButtonClick","handleDeleteUserContractLinkButtonClick","handleUserCreation","handleEnrolLinkGenerateButtonClick","handleEnrolUrlClipboardCopyButton","handleBulkContractUserInput","handleAddFilters","handleRemoveFilters","click","contractUserFilter","URLSearchParams","search","get","contractFilter","val","reload","on","event","target","files","modal","async","formData","FormData","append","fetchParams","method","body","bulkCSVUploadResponse","fetch","ok","Error","status","json","args","contextId","contextid","itemId","itemid","filename","bulkEnrolResponse","Ajax","call","methodname","result","message","bulkResults","JSON","parse","bulkResultTableRowsHtmlString","errors","forEach","record","index","error","html","undefined","navigator","clipboard","writeText","alert","every","input","reportValidity","contractId","courseId","done","response","contractEnrolLink","text","expirationDate","fail","setCustomValidity","userId","id","courseIds","join","parsedResponse","success","length","failure","find","user","username","removeAttr","prop","currentTarget","attributes","value","deletedContractUserId","console","open","profileUrl","deletedInstitutionContractId","fullname","attr","email","avatar","contractsHtmlString","contracts","contract","courseName"],"mappings":"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"}