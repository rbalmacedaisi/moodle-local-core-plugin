{{!
    This file is part of Moodle - https://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_grupomakro_core/manage_contract

    Template purpose and description.

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Context variables required for this template:
    * attributes Array of name / value pairs.

    Example context (json):
    {
        "attributes": [
            { "name": "src", "value": "https://example.com/imgs/logo.png" },
            { "name": "class", "value": "iconsmall" }
        ]
    }
}}
<div class="container-fluid pt-3">
    <div class="row"> 
        <div class="col-sm-12 mb-3 d-flex flex-wrap">
            {{! Card Number of contracts }}
            <div class="card contract-card shadow-sm border-0 m-2">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <span class="bg-primary p-2 mr-2 spicon" >
                            <i class="fa fa-file-text-o"></i>
                        </span>
                        <div class="p-user-content">
                            <h4 class="mb-0">{{numberOfContracts}}</h4>
                            <span class="text-muted ">{{#str}}contracts, local_grupomakro_core{{/str}}</span>
                        </div>
                    </div>
                </div>
            </div>
            {{! End Card Number of contracts }}
            
            {{! Card Number of users }}
            <div class="card users-card shadow-sm border-0 m-2">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <span class="bg-secondary p-2 mr-2 spicon" >
                            <i class="fa fa-users"></i>
                        </span>
                        <div class="p-user-content">
                            <h4 class="mb-0">{{numberOfUsers}}</h4>
                            <span class="text-muted">{{#str}}totalusers, local_grupomakro_core{{/str}}</span>
                        </div>
                    </div>
                </div>
            </div>
            {{! End Card Number of users }}
        </div>
    </div>
    
    {{! Content of the institutions }}
    <div class="row"> 
        <div class="col-sm-12">
            {{! Tabs }}
            <ul class="nav nav-tabs bg-transparent" role="tablist" id="institution-tabs">
                <li class="nav-item">
                    <a class="nav-link active bg-transparent" data-toggle="tab" href="#contracts" role="tab">{{#str}}cid, local_grupomakro_core{{/str}}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link bg-transparent" data-toggle="tab" href="#users" role="tab">{{#str}} users, local_grupomakro_core{{/str}}</a>
                </li>
            </ul>
            {{! End Tabs }}
            
            {{! Tab content }}
            <div class="tab-content py-5">
                {{! Tab contracts }}
                <div class="tab-pane active" id="contracts" role="tabpanel">
                    <div class="row d-flex">
                        <div class="col-sm-12 col-md-8 d-flex mb-1">
                            <input class="form-control" id="contract-search" type="text" value="{{contractFilter}}" placeholder="{{#str}} search, local_grupomakro_core{{/str}}">
                            <a class="btn btn-outline-primary btn-sm mx-1" id="contract-apply-filter-button" href="#">{{#str}}apply_filter, local_grupomakro_core{{/str}}</a>
                            <a class="btn btn-outline-secondary btn-sm" id="contract-remove-filter-button" href="#">{{#str}}remove_filter, local_grupomakro_core{{/str}}</a>
                        </div>
                        <div class="spacer"></div>
                        
                        <a class="btn btn-primary ml-3 mb-1 " id="create-contract-button" href="#">{{#str}}create_contract, local_grupomakro_core{{/str}}</a>
                    </div>
                    {{{table}}}
                </div>
                {{! End Tab contracts }}
                
                {{! Tab Users }}
                <div class="tab-pane" id="users" role="tabpanel">
                    {{> local_grupomakro_core/userspanel }}
                </div>
                {{! End Tab Users }}
            </div>
            {{! End Tab content }}
        </div>
    </div>
    {{! End Content of the institutions }}
</div>
{{> local_grupomakro_core/modals/confirm_contract_deletion_modal }}
{{> local_grupomakro_core/modals/confirm_contract_user_deletion_modal }}
{{> local_grupomakro_core/modals/class_error }}