{{!
    This file is part of Moodle - https://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_grupomakro_core/institution_managment

    Template purpose and description.

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Context variables required for this template:
    * attributes Array of name / value pairs.

    Example context (json):
    {
        "attributes": [
            { "name": "src", "value": "https://example.com/imgs/logo.png" },
            { "name": "class", "value": "iconsmall" }
        ]
    }
}}
<div class="container-fluid pt-3">
    <div class="row">
        <div class="col-sm-12 d-flex flex-wrap pl-0">
            {{#institutions}}
            <div class="m-2 position-relative">
                {{! Institution cards }}
                <div class="card" id="institution-card">
                    {{! Card content }}
                    <div class="card-body pt-3">
                        <div class="d-flex align-start mb-3">
                            <span class="bg-primary p-2 mr-2 spicon" >
                                <img src="{{iconcontract}}" height="28">
                            </span>
                            <div class="spacer"></div>
                            {{! Institutions menu }}
                            <div class="btn-groupd menu-card">
                                <button type="button" class="btn btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                    <i id="instmenu" class="fa fa-ellipsis-v" data-toggle="dropdown" data-display="static" aria-expanded="false"></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <button class="dropdown-item edit-institution-button" type="button" institution-id="{{id}}" ><i class="fa fa-edit mr-2"></i>{{#str}} edit, local_grupomakro_core {{/str}}</button>
                                    <button class="dropdown-item delete-institution-button" type="button" institution-id="{{id}}"><i class="fa fa-trash mr-2"></i>{{#str}} remove, local_grupomakro_core {{/str}}</button>
                                </div>
                            </div>
                            {{! End Institutions menu }}
                        </div>
                        <h5 class="card-title mb-1">{{name}}</h5>
                        <span class="text-muted institutionid">Id-{{institutionid}}</span>
                    </div>
                    {{! End Card content }}
                    
                    {{! Card footer }}
                    <div class="card-footer d-flex bg-secondary">
                        <div class="d-flex align-items-center">
                            <div>
                                <i class="fa fa-file-text-o text-light"></i>
                                <small class="text-light">{{numberOfContracts}} {{#str}} contracts, local_grupomakro_core{{/str}}</small>
                            </div>
                        </div>
                        
                        <div class="spacer"></div>
                       <a class="btn btn-primary btn-sm view-institution" institution-id="{{id}}" href="#">{{#str}} see, local_grupomakro_core {{/str}}</a>
                    </div>
                    {{! End Card footer }}
                </div>
                {{! End Institution cards }}
                
                {{! Institutions menu }}
                <!--<div class="ml-auto z-1 menu-card">
                    <a class="dropdown-toggle btn btn-secondary btn-sm" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <i id="instmenu" class="fa fa-ellipsis-v" data-toggle="dropdown" data-display="static" aria-expanded="false"></i>
                    </a>
                    <div class="dropdown-menu">
    					<button class="dropdown-item" type="button"><i class="fa fa-edit mr-2"></i>{{#str}} edit, local_grupomakro_core {{/str}}</button>
                        <button class="dropdown-item" type="button"><i class="fa fa-trash mr-2"></i>{{#str}} remove, local_grupomakro_core {{/str}}</button>
    				</div>
                </div>-->
                
                {{! End Institutions menu }}
            </div>
            {{/institutions}}
            
            {{! Institution creation button }}
            <a id="created" href="" class="m-2 d-flex justify-content-center align-items-center text-decoration-none" data-toggle="modal" data-target="#createInstitutionModalLong">
                <span class="font-weight-bold">{{#str}} create_institution, local_grupomakro_core{{/str}}</span>
            </a>
            {{! End Institution creation button }}
        </div>
    </div>
</div>
{{> local_grupomakro_core/modals/create_institution_modal }}
{{> local_grupomakro_core/modals/update_institution_modal }}
{{> local_grupomakro_core/modals/modal_delete_institution }}
{{> local_grupomakro_core/modals/class_error }}